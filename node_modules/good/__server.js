var Hapi = require('hapi');
var Good = require('./lib');

var server = new Hapi.Server();
server.connection({ host: 'localhost', port: 9001});

var goodOptions = {
    extendedRequests: true,
    opsInterval: 1000,
    responseEvent: 'tail',
    reporters: [{
        reporter: require('good-console'),
        args: [{
            request: '*',
            ops: '*',
            error: '*',
            log: '*'
        }]
    }]
};

server.register({
    register: Good,
    options: goodOptions
}, function (err) {

    if (err) {
        console.error(err);
    }
    else {
        server.start(function () {

            console.info('Server started at ' + server.info.uri);
        });
    }
});